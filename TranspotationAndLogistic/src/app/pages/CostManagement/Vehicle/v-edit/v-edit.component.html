<div class="page-container">
  <header class="page-header">
    @if (!isLoading && currentVehicleId) {
      <h1>Edit Vehicle #{{ currentVehicleId }}</h1>
    } @else {
      <h1>Edit Vehicle</h1>
    }
  </header>
  
  @if(isLoading) {
    <div class="loading-indicator">Loading vehicle details...</div>
  } @else if(error) {
    <div class="error-message">{{ error }}</div>
  } @else {
    <form [formGroup]="vehicleForm" (ngSubmit)="onSubmit()" class="form-wrapper">
      <div class="form-group">
        <label for="collectorId">Assign to Collector</label>
        <select id="collectorId" formControlName="collectorId">
          <option [ngValue]="null" disabled>-- Select a Collector --</option>
          @for(collector of collectors(); track collector.collectorId) {
            <option [value]="collector.collectorId">
                {{ collector.name }} (Current vehicle: {{collector.vehicleLicensePlate || 'None'}})
            </option>
          }
        </select>
        <small class="form-text">Note: Re-assigning a vehicle to a collector who already has one will fail.</small>
      </div>
      <div class="form-group">
        <label for="licensePlate">License Plate</label>
        <input id="licensePlate" formControlName="licensePlate" type="text" />
      </div>
      <div class="form-group">
        <label for="volume">Vehicle Volume / Capacity (mÂ³)</label>
        <input id="volume" formControlName="volume" type="number" step="0.1" />
      </div>
      <div class="form-group">
        <label for="model">Model</label>
        <input id="model" formControlName="model" type="text" />
      </div>
      <div class="form-group">
        <label for="conditionNotes">Condition Notes</label>
        <textarea id="conditionNotes" formControlName="conditionNotes" rows="3"></textarea>
      </div>
      <div class="form-actions">
        <button type="button" class="btn-secondary" (click)="onCancel()">Cancel</button>
        <button type="submit" class="btn-primary" [disabled]="vehicleForm.invalid || !vehicleForm.dirty">Save Changes</button>
      </div>
    </form>
  }
</div>