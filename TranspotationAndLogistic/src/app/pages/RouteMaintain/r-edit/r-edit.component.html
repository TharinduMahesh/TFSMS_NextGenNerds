@if (formModel()) {
    <div class="modal-overlay">
      <div class="modal-content">
        <button class="close-btn" (click)="onCancel()">X</button>
        <h2>Edit Route</h2>
        
        <form (submit)="onSubmit($event)" class="route-form">
          <div class="form-group">
            <label>Route Name:</label>
            <input type="text" [value]="formModel().rName" (input)="handleInput('rName', $event)" />
          </div>
  
          <div class="form-group">
            <label>Start Location:</label>
            <input type="text" [value]="formModel().startLocation" (input)="handleInput('startLocation', $event)" />
          </div>
  
          <div class="form-group">
            <label>End Location:</label>
            <input type="text" [value]="formModel().endLocation" (input)="handleInput('endLocation', $event)" />
          </div>
  
          <div class="form-group">
            <label>Distance (km):</label>
            <input type="text" [value]="formModel().distance" (input)="handleInput('distance', $event)" />
          </div>
  
          <div class="form-group">
            <label>Collector ID:</label>
            <input type="number" [value]="formModel().collectorId" (input)="handleInput('collectorId', $event)" />
          </div>
  
          <div class="form-group">
            <label>Vehicle ID:</label>
            <input type="number" [value]="formModel().vehicleId" (input)="handleInput('vehicleId', $event)" />
          </div>
  
          <h3>Grower Locations</h3>
          <ul class="grower-list">
            @for (loc of formModel().growerLocations; track loc?.gId) {
              <li>
                <div class="location-info">
                  <strong>Lat:</strong> {{ loc.latitude }},
                  <strong>Lng:</strong> {{ loc.longitude }}
                </div>
                <input
                  type="text"
                  [value]="loc.description"
                  (input)="updateGrowerDescription(loc.gId, $event)"
                  placeholder="Location description"
                />
              </li>
            }
          </ul>
  
          <div class="form-actions">
            <button type="submit" class="save-btn">Save</button>
            <button type="button" class="cancel-btn" (click)="onCancel()">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  }