<div class="form-wrapper">
  <header class="main-header">
    <h1 class="header-title">Sales Entry Form</h1>
  </header>

  <form (ngSubmit)="onSubmit()" class="sales-form">
    <!-- Two-column grid layout for the form fields -->
    <div class="form-grid">
      <!-- Sales Date -->
      <div class="form-group">
        <label for="salesDate">Sales Date:</label>
        <input id="salesDate" type="date" [(ngModel)]="salesDate" name="salesDate"
          [class.is-invalid]="salesDateError()">
        @if (salesDateError()) { <div class="error-message">{{ salesDateError() }}</div> }
      </div>
      <!-- Buyer Name -->
      <div class="form-group">
        <label for="buyerName">Buyer Name:</label>
        <input id="buyerName" type="text" [(ngModel)]="buyerName" name="buyerName"
          [class.is-invalid]="buyerNameError()">
        @if (buyerNameError()) { <div class="error-message">{{ buyerNameError() }}</div> }
      </div>
      <!-- Tea Grade -->
      <div class="form-group">
        <label for="teaGrade">Tea Grade:</label>
        <input id="teaGrade" type="text" [(ngModel)]="teaGrade" name="teaGrade" [class.is-invalid]="teaGradeError()">
        @if (teaGradeError()) { <div class="error-message">{{ teaGradeError() }}</div> }
      </div>
      <!-- Discount -->
      <div class="form-group">
        <label for="discount">Discount:</label>
        <input id="discount" type="number" [(ngModel)]="discount" name="discount" [class.is-invalid]="discountError()">
        @if (discountError()) { <div class="error-message">{{ discountError() }}</div> }
      </div>
      <!-- Remarks -->
      <div class="form-group">
        <label for="remarks">Remarks:</label>
        <input id="remarks" type="text" [(ngModel)]="remarks" name="remarks">
      </div>
      <!-- Kilos Sold -->
      <div class="form-group">
        <label for="kilosSold">Kilos Sold:</label>
        <input id="kilosSold" type="number" [(ngModel)]="kilosSold" name="kilosSold"
          [class.is-invalid]="kilosSoldError()">
        @if (kilosSoldError()) { <div class="error-message">{{ kilosSoldError() }}</div> }
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="button-group">
      <button type="button" (click)="clearForm()" class="btn btn-clear">Clear Form</button>
      <button type="submit" class="btn btn-add" [disabled]="!isFormValid()">Add Sale</button>
    </div>
  </form>

  <!-- Sale Records Table -->
  <div class="records-section">
    <h2 class="records-title">Sale Records</h2>
    <div class="table-container">
      <table class="records-table">
        <thead>
          <tr>
            <th>Sales Date</th>
            <th>Buyer Name</th>
            <th>Tea Grade</th>
            <th>Kilos Sold</th>
            <th>Discounts</th>
            <th>Remarks</th>
          </tr>
        </thead>
        <tbody>
          @for (record of records(); track record.id) {
          <tr>
            <td>{{ record.salesDate }}</td>
            <td>{{ record.buyerName }}</td>
            <td>{{ record.teaGrade }}</td>
            <td>{{ record.kilosSold }}</td>
            <td>{{ record.discount }}</td>
            <td>{{ record.remarks }}</td>
          </tr>
          } @empty {
          <!-- This row is shown when the records array is empty -->
          <tr>
            <td colspan="6" class="empty-row">No sales records yet.</td>
          </tr>
          }
        </tbody>
      </table>
    </div>
    <div class="exit-button-container">
        <button class="btn btn-exit" (click)="onExit()">Exit</button>
      </div>
  </div>
</div>
