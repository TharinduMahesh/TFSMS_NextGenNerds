<div class="page-container">
  <h2 class="page-title">Tea Returns Entry</h2>

  <form (ngSubmit)="addReturn()" #returnForm="ngForm" class="entry-form">
    <div class="form-grid">
      <!-- Left Column -->
      <div class="form-field">
        <label for="season">Season:</label>
        <input id="season" type="text" [(ngModel)]="season" name="season" 
               (blur)="touched.season.set(true)" [class.is-invalid]="seasonError()">
        @if (seasonError()) { <div class="error-message">{{ seasonError() }}</div> }
      </div>
      <div class="form-field">
        <label for="reason">Reason:</label>
        <input id="reason" type="text" [(ngModel)]="reason" name="reason"
               (blur)="touched.reason.set(true)" [class.is-invalid]="reasonError()">
        @if (reasonError()) { <div class="error-message">{{ reasonError() }}</div> }
      </div>
      <div class="form-field">
        <label for="gardenMark">Garden Mark:</label>
        <input id="gardenMark" type="text" [(ngModel)]="gardenMark" name="gardenMark"
               (blur)="touched.gardenMark.set(true)" [class.is-invalid]="gardenMarkError()">
        @if (gardenMarkError()) { <div class="error-message">{{ gardenMarkError() }}</div> }
      </div>
      <div class="form-field">
        <label for="kilosReturned">Kilos Returned:</label>
        <input id="kilosReturned" type="number" [(ngModel)]="kilosReturned" name="kilosReturned"
               (blur)="touched.kilosReturned.set(true)" [class.is-invalid]="kilosReturnedError()">
        @if (kilosReturnedError()) { <div class="error-message">{{ kilosReturnedError() }}</div> }
      </div>
      
      <!-- Right Column -->
      <div class="form-field">
        <label for="invoiceNumber">Invoice Number:</label>
        <input id="invoiceNumber" type="text" [(ngModel)]="invoiceNumber" name="invoiceNumber"
               (blur)="touched.invoiceNumber.set(true)" [class.is-invalid]="invoiceNumberError()">
        @if (invoiceNumberError()) { <div class="error-message">{{ invoiceNumberError() }}</div> }
      </div>
      <div class="form-field">
        <label for="returnDate">Return Date:</label>
        <input id="returnDate" type="date" [(ngModel)]="returnDate" name="returnDate"
               (blur)="touched.returnDate.set(true)" [class.is-invalid]="returnDateError()">
        @if (returnDateError()) { <div class="error-message">{{ returnDateError() }}</div> }
      </div>
      
      <div></div> <!-- Placeholder for grid alignment -->
      
      <div class="form-actions">
        <button type="button" class="btn btn-clear" (click)="clearForm()">Clear Form</button>
        <button type="submit" class="btn btn-add" [disabled]="!isFormValid()">Add Return</button>
      </div>
    </div>
  </form>

  <section class="records-section">
    <h3 class="records-title">Return Records</h3>
    <div class="table-wrapper">
      <!-- Table remains the same -->
      <table>
        <thead>
          <tr>
            <th>Return No.</th>
            <th>Season</th>
            <th>Garden Mark</th>
            <th>Invoice</th>
            <th>Return Date</th>
            <th>Kilos Returned</th>
            <th>Reason</th>
          </tr>
        </thead>
        <tbody>
          @for (record of records(); track record.id) {
            <tr>
              <td>{{ record.returnNo }}</td>
              <td>{{ record.season }}</td>
              <td>{{ record.gardenMark }}</td>
              <td>{{ record.invoiceNumber }}</td>
              <td>{{ record.returnDate }}</td>
              <td>{{ record.kilosReturned }}</td>
              <td>{{ record.reason }}</td>
            </tr>
          } @empty {
            <tr>
              <td colspan="7" class="no-records-cell">No return records found.</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </section>

  <footer class="page-footer">
    <button class="btn btn-exit" (click)="onExit()">Exit</button>
  </footer>
</div>