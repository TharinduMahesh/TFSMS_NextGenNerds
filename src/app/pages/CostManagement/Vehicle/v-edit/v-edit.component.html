

<div class="modal-overlay" (click)="onCancel()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button (click)="onCancel()" class="close-btn" title="Close">×</button>

    <h2 class="modal-title green">Edit Vehicle</h2>

    <div class="modal-body">
      <form [formGroup]="vehicleForm" (ngSubmit)="onSubmit()" class="form-wrapper">
        <fieldset class="form-section green">
          <legend>Assignment</legend>
          <div class="form-group">
            <label for="collectorId">Assign to Collector</label>
            <select id="collectorId" formControlName="collectorId">
              <option [ngValue]="null" disabled>-- Select a Collector --</option>
              @for(collector of collectors(); track collector.collectorId) {
                <option [value]="collector.collectorId">
                  {{ collector.name }} (Current vehicle: {{collector.vehicleLicensePlate || 'None'}})
                </option>
              }
            </select>
            <small class="form-text" style="margin-top: 8px; color: #6c757d;">Note: Re-assigning a vehicle to a collector who already has one will fail.</small>
          </div>
        </fieldset>

        <fieldset class="form-section green">
          <legend>Vehicle Details</legend>
          <div class="form-row">
            <div class="form-group">
              <label for="licensePlate">License Plate</label>
              <input id="licensePlate" formControlName="licensePlate" type="text" />
            </div>
            <div class="form-group">
              <label for="volume">Volume / Capacity (m³)</label>
              <input id="volume" formControlName="volume" type="number" step="0.1" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="model">Model</label>
              <input id="model" formControlName="model" type="text" />
            </div>
            <div class="form-group">
              <label for="conditionNotes">Condition Notes</label>
              <input id="conditionNotes" formControlName="conditionNotes" type="text" />
            </div>
          </div>
        </fieldset>
      </form>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-secondary" (click)="onCancel()">Cancel</button>
      <button type="submit" class="btn-primary" (click)="onSubmit()" [disabled]="vehicleForm.invalid || !vehicleForm.dirty">Save Changes</button>
    </div>
  </div>
</div>



