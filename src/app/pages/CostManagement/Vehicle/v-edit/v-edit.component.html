<div class="modal-overlay" (click)="onCancel()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button (click)="onCancel()" class="close-btn" title="Close">×</button>

    <!-- New Modal Header -->
    <div class="modal-header">
      <h2>Edit Vehicle</h2>
      <p>Update the details for plate: {{ vehicle.licensePlate }}</p>
    </div>

    <!-- Main Form Body -->
    <form [formGroup]="vehicleForm" (ngSubmit)="onSubmit()" class="form-wrapper">
      <div class="modal-body">
        <!-- Left Column -->
        <div class="details-column">
          <!-- Blue theme for core details -->
          <fieldset class="details-section theme-blue">
            <legend>Vehicle Details</legend>
            <div class="form-group">
              <label for="licensePlate">License Plate</label>
              <input id="licensePlate" formControlName="licensePlate" type="text" />
            </div>
            <div class="form-group">
              <label for="model">Model</label>
              <input id="model" formControlName="model" type="text" />
            </div>
            <div class="form-group">
              <label for="volume">Volume / Capacity (m³)</label>
              <input id="volume" formControlName="volume" type="number" step="0.1" />
            </div>
          </fieldset>
          
          <fieldset class="details-section theme-blue">
            <legend>Assignment</legend>
            <div class="form-group">
              <label for="collectorId">Assigned Collector</label>
              <input id="collectorId" [value]="vehicle.collectorName || 'N/A'" readonly>
              <small>Collector assignment cannot be changed during an edit.</small>
            </div>
          </fieldset>
        </div>

        <!-- Right Column -->
        <div class="details-column">
          <!-- Green theme for condition checklist -->
          <fieldset class="details-section theme-green">
            <legend>Condition Checklist</legend>
            <div class="checkbox-group">
              <label class="checkbox-item">
                <input type="checkbox" formControlName="isClean">
                <span class="custom-checkbox"></span> Clean and suitable for tea
              </label>
              <label class="checkbox-item">
                <input type="checkbox" formControlName="hasGoodTires">
                <span class="custom-checkbox"></span> Good tires, brakes, lights
              </label>
              <label class="checkbox-item">
                <input type="checkbox" formControlName="hasVentilation">
                <span class="custom-checkbox"></span> Ventilated cargo area
              </label>
              <label class="checkbox-item">
                <input type="checkbox" formControlName="isPestFree">
                <span class="custom-checkbox"></span> No moisture or pests
              </label>
              <label class="checkbox-item">
                <input type="checkbox" formControlName="hasValidDocs">
                <span class="custom-checkbox"></span> Valid documents
              </label>
              <label class="checkbox-item">
                <input type="checkbox" formControlName="hasFireExtinguisher">
                <span class="custom-checkbox"></span> Has fire extinguisher
              </label>
            </div>
          </fieldset>
        </div>
      </div>

      <!-- Form Footer -->
      <div class="form-actions">
        <button type="button" class="btn-cancel" (click)="onCancel()">Cancel</button>
        <button type="submit" class="btn-save" [disabled]="vehicleForm.invalid || !vehicleForm.dirty">
          Save Changes
        </button>
      </div>
    </form>
  </div>
</div>